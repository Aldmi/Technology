Первым делом коммит всех отложенных изменений.

Затем запустите эту команду:

git rm -r --cached .
Это уберет все из индекса, затем просто запустите:

git add .
Закоммитите это:

git commit -m ".gitignore is now working"